---
## Front matter
title: "Понятие и функции маршрутизатора, отличие маршрутизаторов от коммутаторов."
subtitle: "Администрирование локальных сетей"
author: "Ищенко Ирина НПИбд-02-22"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Введение

Маршрутизаторы и коммутаторы являются ключевыми устройствами в компьютерных сетях, но выполняют разные функции. В данной работе мы рассмотрим понятие и основные функции маршрутизатора, а также сравним его с коммутатором. Понимание различий между этими устройствами важно для правильного проектирования и настройки сетевой инфраструктуры.

В практической части будет приведен пример, иллюстрирующий разницу в работе маршрутизатора и коммутатора, что поможет лучше усвоить их роль в передаче данных.

# Понятие и функции маршрутизатора

## Понятие маршрутизатора

Маршрутизатор (Router) -- устройство, которое пересылает пакеты между сетями[@Gost2011]. Решение о пересылке основано на информации сетевого уровня и таблицах маршрутизации, обычно построенных в соответствии с протоколами маршрутизации. ІР маршрутизатор пересылает данные, основываясь на IP-источнике и адресах назначения.

Основная функция маршрутизатора — чтение заголовков пакетов сетевых протоколов, принимаемых и буферизуемых по каждому порту(например, IPX, IP, AppleTalk или DECnet)
и принятие решения о дальнейшем маршруте следования пакета по его сетевому адресу,
включающему, как правило, номера сети и узла[@Olifer2006].

Маршрутизатор осуществляет связь разных типов сетей и обеспечивает доступ к глобальной сети, управляет трафиком на основе протокола сетевого уровня[@Kulyabov2008]. Подобно повторителям, маршрутизаторы восстанавливают уровень и форму передаваемого сигнала. Так же, как и мосты, они не передают адресату коллизии или повреждённые кадры, и из-за буферизации имеют задержку при передаче. Но в отличие от повторителей, мостов и коммутаторов, маршрутизаторы переформировывают передаваемые кадры Ethernet, а также могут поддерживать такие нетиповые функции, как подсчёт трафика, авторизация пользователей, ведение статистики и т.п.

Когда пакет прибывает на маршрутизатор, отрезаются заголовки и концевики кадров и остаются только поля данных, которые и передаются программному обеспечению маршрутизатора[@Tanenbaum2015]. Далее анализируется заголовок пакета и в соответствии с ним выбирается его дальнейший путь. Если это IP-пакет, то в заголовке будет содержаться 32-битный (IPv4) или 128-битный (IPv6), а не 48-битный IEEE 802 адрес. Программное обеспечение маршрутизатора не интересуется адресами кадров и даже не знает, откуда эти кадры взялись (то ли с ЛВС, то ли с двухточечной линии). 

## Функции маршрутизатора

Функции маршрутизатора могут быть разбиты на 3 группы[@Olifer2006] в соответствии с уровнями модели OSI (рис. [-@fig:001]):

- уровень интерфейсов;
- уровень сетевого протокола;
- уровень протокола маршрутизации.

![Функции маршрутизатора](image/routerf.jpg){#fig:001 width=100%}

### Уровень интерфейсов

На нижнем уровне маршрутизатор обеспечивает физический интерфейс со средой передачи, включая согласование уровней электрических сигналов, линейное и логическое кодирование, оснащение определенным типом разъем. В разных моделях маршрутизаторов предусматриваются различные наборы физических интерфейсов. С каждым интерфейсом для подключения локальной сети неразрывно связан определенный протокол канального уровня — например, Ethernet, Token Ring, FDDI. Интерфейсы для присоединения к глобальным сетям чаще всего определяют только некоторый стандарт физического уровня, над которым в маршрутизаторе могут работать различные протоколы канального уровня. Например, глобальный порт может поддерживать интерфейс V.35, поверх которого работают различные протоколы канального уровня: РРР (передает трафик протокола IP и других сетевых протокол) и др. Разница между интерфейсами локальных и глобальных сетей объясняется тем, что технологии локальных сетей определяют стандарты как физического, так и канального уровней, которые могут применяться только вместе.

Интерфейсы маршрутизатора выполняют полный набор функций физического и канального уровней по передаче кадра, включая получение доступа к среде, формирование битовых сигналов, прием кадра, подсчет его контрольной суммы и передачу поля данных кадра верхнему уровню при корректном значении контрольной суммы.

Как и любой конечный узел, каждый порт маршрутизатора имеет собственный аппаратный адрес (в локальных сетях МАС-адрес), по которому ему и направляются кадры, требующие маршрутизации другими узлами сети.

Маршрутизатор должен поддерживать все протоколы канального и физического уровней, используемые в каждой из сетей, к которым он будет непосредственно присоединен.

Кадры после обработки протоколами физического и канального уровней, освобождаются от заголовков канального уровня. Извлеченные из поля данных кадра пакеты передаются модулю сетевого протокола.

Сетевой протокол в свою очередь извлекает из пакета заголовок сетевого уровня и анализирует содержимое его полей.

### Уровень сетевого протокола

Сетевой протокол, в свою очередь, извлекает из пакета заголовок сетевого уровня, анализирует и корректирует его содержимое. Прежде всего проверяется контрольная сумма, и если пакет пришел поврежденным, он отбрасывается. Кроме того, выполняется проверка на превышение времени жизни пакета (время, которое пакет провел в сети). Если превышение имело место, то пакет также отбрасывается. На этом этапе вносятся корректировки в содержимое некоторых полей, например наращивается время жизни пакета, пересчитывается контрольная сумма

На сетевом уровне выполняется одна из важнейших функций маршрутизатора — фильтрация трафика. Пакет сетевого уровня, находящийся в поле данных кадра, для мостов/коммутаторов представляется неструктурированной двоичной последовательностью. Маршрутизаторы же, программное обеспечение которых содержит модуль сетевого протокола, способны производить анализ отдельных полей пакета. Они оснащаются развитыми средствами пользовательского интерфейса, которые позволяют администратору без особых усилий задавать сложные правила фильтрации. Маршрутизаторы, как правило, позволяют также анализировать структуру сообщений транспортного уровня, поэтому фильтры могут не пропускать в сеть сообщений определенных прикладных служб, например службы telnet, анализируя поле типа протокола в транспортном сообщении.

К сетевому уровню относится основная функция маршрутизатора — определение маршрута пакета. По номеру сети, извлеченному из заголовка пакета, модуль сетевого протокола находит в таблице маршрутизации строку, содержащую сетевой адрес следующего маршрутизатора и номер порта, на который нужно передать данный пакет, чтобы он двигался в правильном направлении.

Перед тем как передать сетевой адрес следующего маршрутизатора на канальный уровень, необходимо преобразовать его в локальный адрес той технологии, которая используется в сети, содержащей следующий маршрутизатор. Для этого сетевой протокол обращается к протоколу разрешения адресов. Протоколы этого типа устанавливают соответствие между сетевыми и локальными адресами. Таблица соответствия локальных адресов сетевым адресам строится отдельно для каждого сетевого интерфейса. 

### Уровень протокола маршрутизации

Сетевые протоколы активно используют в своей работе таблицу маршрутизации, но ни ее построением, ни поддержанием не занимаются. Эти функции выполняют протоколы маршрутизации, с помощью которых маршрутизаторы обмениваются информацией о топологии сети, а затем анализируют полученные сведения, определяя наилучшие по тем или иным критериям маршруты. Результаты анализа и составляют содержимое таблиц маршрутизации.

Помимо перечисленных функций на маршрутизаторы могут быть возложены и другие обязанности, например операции, связанные с фрагментацией.


# Отличие маршрутизаторов от коммутаторов

Сетевой коммутатор (Switch) — устройство, предназначенное для соединения нескольких узлов компьютерной сети в пределах одного сегмента. Коммутатор хранит в памяти таблицу MAC-адресов, в которой указывается соответствие MAC-адреса узла порту коммутатора. Коммутатор передаёт данные непосредственно получателю [@Kulyabov2008].

Основные отличия маршрутизатора от коммутатора:

1. Принцип работы. Коммутатор использует канальный уровень при передаче информации. Он передает пакеты данных на основании МАС-адреса из таблицы коммутации. А роутер функционирует на третьем уровне сетевой модели OSI. Он учитывает IP-адрес, проводит анализ данных, фильтрует и кодирует их. Роутер может составлять собственные таблицы маршрутизации согласно настройкам, введенным пользователем, и динамически менять их в реальном времени.
2. Соединение. Коммутатор способен объединить отдельные компьютерные узлы в единую сеть. Маршрутизатор соединяет отдельные сети.
3. Выход в глобальную сеть. Коммутатор не способен подключиться к интернету, а роутер запросто выполняет эту задачу.
4. Скорость работы. Благодаря меньшему объему обрабатываемых данных коммутатор обладает большей скоростью передачи данных.
5. Цена. Свитч всегда имеет меньшую стоимость. Это объясняется ограниченным функционалом такого устройства.

## Пример различий на практике

Расссмотрим сеть учебной организации. Особенности организации с точки зрения планирования локальной сети[@Kulyabov2021]:
- наша организация располагается в одном городе (в Москве), но на двух территориях («Донская» и «Павловская»);
  - группы пользователей организации:
  - администрация (А);
  - преподавательский состав кафедр (К);
  - пользователи дисплейных классов общего пользования (ДК);
  - другие пользователи (Д);
- предполагается, что на территории «Донская» будут располагаться:
  - устройства управления сетью;
  - серверная инфраструктура;
  - оборудование всех групп пользователей;
- предполагается, что на территории «Павловская» будет располагаться оборудование групп пользователей «ДК» и «Д».


Схема сети выглядит следующим образом(рис. [-@fig:002]).

![Схема сети](image/1.png){#fig:002 width=70%}

Отправим пакет между устройствами в одном VLAN 4. Сначала пакет идёт к коммутатору 4, затем к 1 и после не направляется к маршрутизатору, так как ему известны адреса устройств в одной виртуальной сети. Затем пакет возвращается к 1 коммутатору переходит к коммутатору с другой территории и наконец достигает адресата. После этого как обычно отправляется ответ по тому же маршруту в обратном порядке(рис. [-@fig:003]).

![Проверка доступности устройствв одном VLAN](image/2.png){#fig:003 width=90%}

Отправим пакет из VLAN 4 во VLAN 6. Сначала пакет идёт к коммутатору 4, затем к 1 и после к маршрутизатору для того, чтобы получить адрес устройства из другой виртуальной подсети, затем пакет возвращается к 1 коммутатору переходит к коммутатору с другой территории и наконец достигает адресата. После этого как обычно отправляется ответ по тому же маршруту в обратном порядке(рис. [-@fig:004]).

![Проверка доступности устройств в разных VLAN](image/3.png){#fig:004 width=90%}

# Заключение

В ходе работы были рассмотрены основные функции маршрутизатора, а также проведено сравнение с коммутаторами. Установлено, что маршрутизаторы работают на сетевом уровне модели OSI, обеспечивая передачу данных между разными сетями, в то время как коммутаторы функционируют на канальном уровне, управляя передачей трафика внутри одной сети.

Практический пример наглядно продемонстрировал ключевые различия между этими устройствами. Понимание их особенностей позволяет эффективно проектировать и настраивать сетевую инфраструктуру, обеспечивая стабильную и безопасную передачу данных.

Таким образом, маршрутизаторы и коммутаторы играют важную, но разную роль в организации сетевого взаимодействия, и их правильное применение способствует повышению производительности сети.

# Список литературы{.unnuпрmbered}

::: {#refs}
:::